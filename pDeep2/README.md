# pDeep2

## Python and requirements

Make sure Python version is 3.6, and TensorFlow version is >= 1.8 (or 1.6) and < 2.0. Anaconda enviroment is recommended.

## Predict

First, specify a model in predict.py:
```
...
import model.lstm_tf as lstm
model_folder = './tf-models/model-180921-modloss/'
model = 'pretrain-180921-modloss.ckpt'
...
```

And then run predict.py:
```
$ python predict.py -e 0.3 -i Lumos -in peptide.txt -out predict.txt
```

#### arguments of predict.py:
Example of input format for prediction is shown in "peptide.txt".

-e 0.3 (or --nce 0.3) means normalized collision energy is 30%;

-i Lumos (or --instrument Lumos) means the instrument is Lumos, pDeep recently supports QE, Lumos, Velos, and Elite.

## Train

If you want to train a new model, you have to prepare .plabel files ( which can be generated by batch_pLabel.exe, see https://github.com/pFindStudio/pDeep/tree/master/batch_pLabel ). You can also generate .plabel file by yourself, an example of .plabel file is shown in data/example.plabel.

Check train.py and run:
```
$ python train.py
```

## Train (transfer learning)

Check transfer_train.py and run:
```
$ python transfer_train.py
```
